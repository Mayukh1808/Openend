clc; 
clear all;
close all;
pkg load signal;
fs = 1000;
f0=50; 
w = 0.005;
t=0:1/fs:1;
x1=pulstran (0:1/fs:1, 0:1/f0:1, "rectpuls", w);
x2=0.5*pulstran (0:1/fs:1, 0.01:1/f0:1, "rectpuls", w);
subplot(4,1,1);
plot(t,x1,t,x2,'r');
title('1904428 Mayukh pulse signals');
y1=20*sin(2*pi*2*t);
y2=20*sin(2*pi*4*t);
subplot(4,1,2);
plot(t,y1,t,y2,'r');
title('1904428 Mayukh message signals');
Pam1=x1.*y1;
Pam2=x2.*y2;
y3=Pam1+Pam2;
subplot(4,1,3);
plot(t,y3,'r');
title('1904428 Mayukh TDM-PAM Signal');
subplot(4,1,4);
plot(t,Pam1,t,Pam2,'r');
title('1904428 Mayukh PAM signals');
d1=y3.*x1;
[b,a]=butter(5,0.02);
s1=filter(b,a,d1);
figure;
subplot(2,1,1);
plot(t,s1);
title('1904428 Mayukh demodulation1');
d2=y3.*x2;
[b,a]=butter(5,0.02);
s2=filter(b,a,d2);
subplot(2,1,2);
plot(t,s2);
title('1904428 Mayukh demodulation2');